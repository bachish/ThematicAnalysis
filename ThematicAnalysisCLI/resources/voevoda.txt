СБОРНИК 
НАУЧНЫХ ТРУДОВ 
НГТУ. 
– 
2013. 
– 
№ 
1(71). 
– 
72–77 


УДК 62-50:519.216 


ПОНЯТИЕ 
РЕКУРСИИ 
В 
СЕТЯХ 
ПЕТРИ: 
ФАКТОРИАЛ 
ЧИСЛА, 
ЧИСЛА 
ФИБОНАЧЧИ* 


А.А. 
ВОЕВОДА, 
А.В. 
МАРКОВ 


Рассматривается 
понятие 
рекурсии, 
приводится 
описание 
математического 
аппарата 
сетей 
Петри. 
Используя 
алгоритмический 
язык 
сетей 
Петри, 
предложено 
решение 
рекурсивных 
задач 
нахождения 
х-го 
числа 
ряда 
Фибоначчи 
и 
нахождения 
факториала 
х-го 
числа. 
Полученные 
сети 
были 
проанализированы 
при 
помощи 
генерации 
отчета 
о 
пространстве 
состояний,
посредством 
среды моделирования CPNTools. 


Ключевые 
слова: 
рекурсия, 
сети 
Петри, 
CPN 
Tools, 
факториал 
числа, 
числа 
Фибоначчи, 
пространство 
состояний. 


ВВЕДЕНИЕ 


Рекурсией 
называют 
процесс 
повторения 
элементов 
системы 
самоподобным 
образом 
[1]. 
Данный 
термин 
используют 
в 
различных специальных областях 
наук 
– 
от 
лингвистики 
до 
логики, 
самое 
широкое 
применение 
находит 
вматематике 
и 
информатике. 


В 
программировании 
рекурсия 
– 
вызов 
функции 
(процедуры) из 
неё 
же 
самой, 
непосредственно 
(простая 
рекурсия) или 
через 
другие 
функции 
(сложная 
или 
косвенная 
рекурсия). 
Например, 
функция 
А 
вызывает 
функцию 
В, 
а 
функция 
В 
– 
функцию 
А. 
То 
есть 
с 
помощью 
рекурсивной 
программы 
можно 
описать 
бесконечное 
вычисление, 
причём 
без 
явных повторений 
частей 
программы. 


В 
работе 
[2] описано 
решение 
задачи 
«Ханойская 
башня» алгоритмическим 
языком 
сетей 
Петри. 


Так 
как 
ранее 
явного 
описание 
рекурсии 
сетями 
Петри 
авторами 
работы 
не 
встречалось, 
целесообразно 
показать 
данную 
функцию 
еще 
на 
нескольких 
примерах: 
нахождения 
факториала 
Х-го 
числа, 
нахождения 
Х-го 
числа 
ряда 
Фибоначчи. 


Сети 
Петри 
– 
математический 
аппарат 
для 
моделирования 
динамических 
дискретных систем. 
Представляют 
собой 
двудольный 
ориентированный 
граф, 
соединяющий 
вершины 
двух типов 
– 
позиции 
(места) и 
переходы, 
связанные 
между 
собой 
дугами, 
вершины 
одного 
типа 
не 
могут 
быть 
соединены 
непосредственно. 
В 
позициях могут 
размещаться 
метки 
(маркеры), 
способные 
перемещаться 
посети. 


Предполагается, 
что 
использование 
данного 
инструмента 
исследования 
систем 
даёт 
возможность 
получить 
важную 
информацию 
о 
структуре 
и 
динамическом 
поведении 
моделируемой 
системы. 
Проанализировать 
её 
динамику 
функционирования 
можно при помощи свободного языка сетей Петри [3,4]. 


1. 
ОПИСАНИЕ ЗАДАЧИ 
НАХОЖДЕНИЯ 
Х-ГО 
ЧИСЛА 
РЯДА ФИБОНАЧЧИ И ЗАДАЧИ НАХОЖДЕНИЯ 
ФАКТОРИАЛА 
Х-ГО 
ЧИСЛА 
Числа 
Фибоначчи 
– 
элементы 
числовой 
последовательности, 
в 
которой 
каждое 
последующее 
число 
равно 
сумме 
двух предыдущих чисел. 
Пример: 
0, 
1, 
1, 
2, 
3, 
5, 
8, 
13, 
21, 
34, 
55, 
89, 
144, 
233, 
377, 
610, 
987, 
1597, 
2584, 
4181, 
6765, 
10946, 
… 


Факториал числа 
Х 
– 
произведение 
всех натуральных чисел от 
одного 
до 
Х 
включительно: 
в 
которой 
каждое 
последующее 
число 
равно 
сумме 
двух 
предыдущих чисел. 


X 
X 
!? 
1?2??? 
X 
??i. 


i?1 


Например: 
5!? 
5?4?3? 
2?1? 
120. 


Одной 
из 
самых известных головоломок, 
связанной 
с 
рекурсией, 
является 
«Ханойская 
башня». 
Описание 
задачи 
и 
ее 
решение 
приводится 
в 
[2]. 


2. 
ПОСТРОЕНИЕ СЕТИ 
ПЕТРИ ДЛЯ ЗАДАЧ НАХОЖДЕНИЯ 
Х-ГО 
ЧИСЛА 
РЯДА ФИБОНАЧЧИ И НАХОЖДЕНИЯ 
ФАКТОРИАЛА 
Х-ГО 
ЧИСЛА 
Для 
моделирования 
сетей 
Петри 
был использован 
программный 
пакет 
CPN 
Tools 
version 
3.2.2. 
(October 
2011). 


CPN 
Tools 
предоставляет 
возможность 
реализовать 
сеть 
Петри 
любой 
сложности, 
таким 
образом, 
данный 
пакет 
может 
использоваться 
как 
для 
построения 
ординарных сетей, 
так 
и 
для 
цветных, 
временных и 
иерархических. 


На 
основании 
работ 
[5–8] была 
построена 
сеть, 
представленная 
на 
рис. 
1, 
для 
задачи 
нахождения 
х-го 
числа 
ряда 
Фибоначчи 
и 
сеть, 
представленная 
на 
рис. 
3, 
длязадачи 
нахождения 
факториала 
х-гочисла. 


Условие, 
по 
которому 
строилась 
сеть 
(рис. 
3), 
вычисление 
20-го 
числа 
ряда 
Фибоначчи. 
Место 
x_i 
содержит 
значение 
текущего 
числа, 
а 
место 
x_i1 


А.А. 
Воевода, 
А.В. 
Марков 


значение 
предыдущего 
числа 
ряда 
Фибоначчи. 
Перед 
выполнением 
рекурсивной 
процедуры 
происходит 
проверка 
нахождения 
нужного 
числа 
с 
помощью 
переходов 
Complete1 и 
Complete2. 
Рекурсивную 
функцию 
выполняет 
переход 
Recursion, 
который 
также 
наполняет 
список 
полученных 
ранее 
значения 
в 
место 
Xi-2. 



Рис. 
1. 
Сеть Петри для 
задачи нахождения 
х-го числа 
ряда Фибоначчи 
На 
рис. 
2 представлена 
сеть, 
в 
которой 
найден 
20-й 
член 
ряда 
Фибоначчи. 



Рис. 
2. 
Сеть Петри для решенной 
задачи нахождения 
20-го числа ряда Фибоначчи 


Место Complete 
содержит 
фишку, 
в 
которой 
представлены 
два 
типа 
данных. 
Первое 
–это значения X-го члена 
ряда 
Фибоначчи, 
а второе указывает на 
номер члена 
чисел Фибоначчи. 
Из 
списка, 
который 
содержится 
в 
месте 
X 
i-2, 
можноотследить 
все 
значения 
чисел от 
1 до20 члена 
ряда 
Фибоначчи. 


Опытным 
путем 
было 
проверено, 
что 
программный 
пакет 
CPN 
Tools, 
используемый 
при 
выполнении 
данной 
работы, 
способен 
вычислять 
факториал 
только 
до числа 
значением 
12. 
По 
этой 
причине 
было решено представить 
пример нахождения 
факториала 
двенадцати. 



Понятие 
рекурсии 
в 
сетях 
Петри: факториал 
числа, 
числа 
Фибоначчи 



Рис. 
3. 
Сеть Петри для 
задачи нахождения факториала 
х-го числа 


Место 
Number 
содержит 
фишку, 
в 
которой 
показано 
искомое 
число факториала 
и 
произведение 
предыдущих двух чисел. 
Место 
List 
предназначено 
для 
хранения 
получаемых значений 
произведения, 
получаемых в 
процессе 
нахождения 
факториала 
числа. 



Рис. 
4. 
Сеть Петри для решенной 
задачи нахождения 
факториала х-го числа 


Из 
рис. 
4 видно, 
что 
место 
Complete 
содержит 
фишку 
со 
значением 
479 010600, 
соответствующему 
факториалу 
двенадцати. 
Место 
List 
содержит 
список 
значений 
произведений, 
получаемых при 
нахождении 
факториала 
двенадцати. 


4. 
АНАЛИЗ ПОСТРОЕННЫХ 
СЕТЕЙ 
Средство 
визуального 
моделирования 
CPN 
Tools 
позволяет 
проанализировать 
построенную 
сеть 
с помощью 
расчет 
пространства 
состояний. 



А.А. 
Воевода, 
А.В. 
Марков 


Отчет 
о свойствах, 
полученный 
при 
помощи 
анализа 
пространства 
состояний, 
построенных сетей 
(рис. 
1, 
рис. 
3) представлен 
в 
табл. 
1 и 
табл. 
2, 
соответственно. 


Таблица 
1 


Отчет 
о свойствах сети нахождения 
х-го числа ряда Фибоначчи 


Результаты 
отчета 
Выводы 
State 
SpaceNodes: 
20 
Arcs: 
19 
Secs: 
0 
Status: 
Full 
Пространство 
состояний 
модели 
вычислено 
полностью 
и 
содержит 
20 
узлов, 
19 
дуг, 
высчитано 
полностью 
за 
0 
секунд. 
Dead 
MarkingsNone 
“Мертвых” 
маркировок 
в 
сети 
нет. 
Dead 
Transition 
Instances 
None 
В 
сети 
нет 
«мертвых» переходов. 


Таблица 
2 


Отчет 
освойствах сети нахождения факториала х-го числа 


Результаты 
отчета 
Выводы 
State 
SpaceNodes: 
12 
Arcs: 
11 
Secs: 
0 
Status: 
Full 
Пространство 
состояний 
модели 
вычислено 
полностью 
и 
содержит 
12 узлов, 
11 дуг, 
высчитано 
полностью 
за 
0 секунд. 
Dead 
MarkingsNone 
“Мертвых” 
маркировок 
в 
сети 
нет. 
Dead 
Transition 
Instances 
None 
В 
сети 
нет 
«мертвых» переходов. 


ЗАКЛЮЧЕНИЕ 


Вданной 
работе 
приводится 
описание 
рекурсии, 
а 
также 
математического 
аппарата 
сетей 
Петри. 


С помощью 
алгоритмического 
языка 
сетей 
Петри, 
посредством 
программного 
пакета 
CPN 
Tools, 
была 
решена 
задача 
нахождения 
Х-го 
числа 
ряда 
Фибоначчи 
и 
задача 
нахождения 
факториала 
Х. 
При 
моделировании 
сетей 
единственным 
недостатком 
пакета 
CPN 
Tools 
было 
отсутствие 
возможности 
оперировать 
числами 
с 
большими 
значениями. 
В данном 
примере вычисления 
факториала 
двенадцати 
является 
пределом 
для 
данной 
версии 
программы, 
которая 
была 
указана 
выше. 


Полученные 
отчеты 
о 
пространстве 
состояний 
показали 
корректность 
построения 
сетей. 


В 
ходе 
моделирования 
сетей, 
которые 
решают 
задачи 
по 
нахождению 
факториала 
числа, 
значения 
члена 
ряда 
Фибоначчи, 
задачи 
«Ханойская 
башня
» [2], 
было 
замечено, 
что 
выполнение 
рекурсии 
осуществляется 
с 
помощью 
переходов 
и 
задания 
им 
соответствующих условий. 



Понятие 
рекурсии 
в 
сетях 
Петри: факториал 
числа, 
числа 
Фибоначчи 


Авторам 
ранее 
не 
встречалось 
описание 
рекурсии 
с 
помощью 
алгоритмического 
языка 
сетей 
Петри. 
Представленное 
решение 
задач 
доказало, 
что 
с 
помощью 
сетей 
Петри 
имеется 
возможность 
реализовать 
рекурсию. 


[1] Вирт 
Н. 
Алгоритмы 
и 
структуры 
данных: 
пер. 
с 
англ / 
Н. 
Вирт. 
– 
М.: 
Мир, 
1989. 
–360с. 
[2] Воевода 
А.А. 
Рекурсия 
в 
сетях 
Петри 
/ 
А.А. 
Воевода, 
А.В. 
Марков 
// 
Сб. 
науч. 
тр. 
НГТУ. 
–2012. 
– 
№3. 
–С. 
115–123. 
[3] 
Питерсон 
Дж. 
Теория 
сетей 
Петри 
и 
моделирование 
систем: 
пер. 
с 
англ /Дж. 
Питерсон. 
– 
М.: 
Мир, 
1984. 
–264с. 
[4] Воевода 
А.А. 
ОкомпактномпредставленииязыковсетейПетри:сетисусловиями 
и 
временные 
сети 
/ 
А.А. 
Воевода, 
А.В. 
Марков 
// 
Сб. 
науч. 
тр. 
НГТУ. 
– 
2010. 
–№2. 
–С.77–82. 
[5] Марков 
А.В. 
Моделированиепроцессапоискапутивлабиринтеприпомощи 
сетейПетри/А.В. 
Марков 
//Сб. 
науч. 
тр. 
НГТУ. 
– 
2010. 
–№ 
4. 
–С. 
133–140. 
[6] 
Романников 
Д.О. 
ОбзорработпосвященнымразработкеПОсиспользованиемUMLисетейПетри/
Д.О. 
Романников, 
А.В. 
Марков, 
И.В. 
Зимаев 
//Сб. 
науч. 
тр. 
НГТУ. 
–2011. 
–№1. 
–С. 
91–104. 
[7] Прытков 
Д.В. 
О 
применении 
сетей 
Петри 
для 
исполнения 
алгоритмов 
на 
примере 
решения 
задач 
о 
кратчайших 
путях 
с 
единственным 
источником 
/
Д.В. 
Прытков 
//Сб. 
науч. 
тр. 
НГТУ. 
–2010. 
–№3. 
–С. 
91–98. 
[8] Марков 
А.В. 
Моделированиепроцессапоискапутивлабиринтеприпомощи 
сетей 
Петри 
для 
системы 
из 
двух 
связных 
звеньев 
/ 
А.В. 
Марков, 
А.А. 
Воевода 
// 
Сб. 
науч. 
тр. 
НГТУ. 
–2011. 
–№ 
3. 
– 
С. 
95–104. 
Воевода 
Александр 
Александрович 
– 
профессор кафедры 
автоматики 
Новосибирского 
государственного 
технического 
университета. 
Направление 
научных 
исследований 
– 
теория 
автоматического 
управления. 
Более 
200 публикаций 
по 
данномунаправлению. 


E-mail: 
voevoda@ucit.ru. 


Марков 
Александр 
Владимирович 
– 
аспирант 
кафедры 
автоматики 
Новосибирскогогосударственноготехнического 
университета. 
Основное 
направление 
научных 
исследований 
– 
исследование 
свойств 
сетей 
Петри 
и 
UML-диагарамм. 
Имеетболее10публикаций. 


E-mail: 
muviton3@mail.ru. 


A.A. 
Voevoda, 
A.V. 
Markov 
The 
conceptsrecursion 
in 
Petri 
nets: Factorial 
numbers,
Fibonacci 
numbers 
Discussesthe 
concept 
ofrecursion, 
a 
description 
ofthemathematicalapparatusofPetri 
nets. 
Using 
the 
algorithmic 
language 
of Petri 
nets, 
offers 
a 
solution 
to 
recursive 
problems 
"Finding 
x-th 
of 
the 
Fibonacci 
numbers" 
and 
"Finding 
the 
factorial 
of 
number x". 
The 
resulting 
network 
was 
analyzedbygeneratingareportonthestatespaceofthesimulationenvironmentbyCPN 
Tools. 


Keywords:recursion,Petrinets,CPNTools,factorialofnumber,Fibonaccinumbers,thestatespace. 



